<!--
* Copyright (c) 2014-2018 NighthawkStudio, All rights reserved.
* @fileoverview To test and verify window load event occur time
* @author Michael Zhang | michaelji520@gmail.com
* @version 1.0 | 2019-12-05
--!>

<html>
  <head></head>
  <body>
    <img width="200" onload="imgLoad()" src="https://i.loli.net/2019/07/08/5d2300c45b90050129.jpg"/>
    <input id="text" />
    <button onclick="addImg()">添加图片</button>
    <script>
      window.addEventListener('load', (e) => {
        console.log('window load');
      });
      function imgLoad() {
        console.log('img load');
      }
      function addImg() {
        let dom = document.createElement('img');
        dom.onload = () => {
          console.log('dynamic add img load!');
        };
        // onload event it only supports with few tags like listed below.
        // <body>, <frame>, <iframe>, <img>, <input type="image">, <link>, <script>, <style>

        let wrapper = document.createElement('div');
        wrapper.onload = () => {
          console.log('img wrapper load'); // won't happen
        }
        dom.src = document.querySelector('#text').value;
        wrapper.appendChild(dom);
        document.body.appendChild(wrapper);
      }
    </script>
  </body>
</html>
